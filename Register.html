<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Registration</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        body {
            /* */
            font-family:  system-ui;
            background-size: cover;
            color: white;
            background: #000000;  /* fallback for old browsers */
background: -webkit-linear-gradient(to top, #000000, #2f2d2d);  /* Chrome 10-25, Safari 5.1-6 */
background: linear-gradient(to top, #000000,#2f2d2d); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */


            
        }
        h2{

            font-family: "Anton", sans-serif;
        }
        .container {
            /* background: rgba(0, 0, 0, 0.7); */
            border-radius: 10px;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 600px;
            padding: 20px;
            margin-top: 50px;
        }
        .form-control {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.5);
            color: white;
        }
        .btn-custom {
    background-color: #000000;
    
    padding: 12px 20px;
    width: 85%;
    border-radius: 0px;
    font-size: 18px;
    font-weight: bold;
   
    text-align: center;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    
  
    color: #FF4533 ;
    border: 1px solid #FF4533;
}

.btn-custom:hover {
    background-color: #b90000;
    border: 1px solid #000000;
    color: #000000;
    transform: scale(1.05);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
}

.btn-custom:active {
    background-color: #e15b4e;
    transform: scale(1);
}


        .form-label{
            font-family:  system-ui;
        }

        .form-check-label{
            font-size: 20px;
        }
    </style>
</head>

<body>
    <div class="container text-center">
        <h2>Event Registration</h2>
        <form id="registrationForm">
            <div class="mb-3 text-start">
                <label class="form-label fw-bold">Your Name *</label>
                <input type="text" id="name" class="form-control" required>
            </div>

            <div class="mb-3 text-start">
                <label class="form-label fw-bold">Number of Participants *</label>
                <input type="number" id="participants" class="form-control" min="1" max="10" required>
            </div>

            <div id="participantNames"></div>

            <div class="mb-3 text-start">
                <label class="form-label fw-bold">College Name *</label>
                <input type="text" id="college" class="form-control" required>
            </div>
            <div class="mb-3 text-start">
                <label class="form-label fw-bold">Course *</label>
                <input type="text" id="course" class="form-control" required>
            </div>
            

            <div class="mb-3 text-start">
                <label class="form-label fw-bold">Contact No *</label>
                <input type="text" id="contact" class="form-control" pattern="[0-9]{10}" maxlength="10" required>
            </div>

            <div class="mb-3 text-start">
                <label class="form-label fw-bold">Email *</label>
                <input type="email" id="email" class="form-control" required>
            </div>

            <div class="mb-3 text-start">
                <label class="form-label fw-bold">Date of Birth *</label>
                <input type="date" id="dob" class="form-control" required>
            </div>

            <div class="mb-3 text-start">
                <label class="form-label fw-bold">Programs *</label>
                <div class="form-check">
                    <input type="radio" name="program" value="Spot Photography" class="form-check-input">
                    <label class="form-check-label">Spot Photography</label>
                </div>
                <div class="form-check">
                    <input type="radio" name="program" value="General Quiz" class="form-check-input">
                    <label class="form-check-label">General Quiz</label>
                </div>
                <div class="form-check">
                    <input type="radio" name="program" value="Best Marketing Team" class="form-check-input">
                    <label class="form-check-label">Best Marketing Team</label>
                </div>
                <div class="form-check">
                    <input type="radio" name="program" value="Best Manager" class="form-check-input">
                    <label class="form-check-label">Best Manager</label>
                </div>
                <div class="form-check">
                    <input type="radio" name="program" value="Treasure Hunt" class="form-check-input">
                    <label class="form-check-label">Treasure Hunt</label>
                </div>
                <div class="form-check">
                    <input type="radio" name="program" value="Fashion Show" class="form-check-input">
                    <label class="form-check-label">Fashion Show</label>
                </div>
                <div class="form-check">
                    <input type="radio" name="program" value="Spot Dance" class="form-check-input">
                    <label class="form-check-label">Spot Dance</label>
                </div>
            </div>

            <button type="submit" class="btn-custom mt-3">Register</button>
        </form>
    </div>

    <!-- Firebase -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCng-xaG9eGymmMos_aHhUttYlMe6zz8u8",
            authDomain: "eventregistration-88419.firebaseapp.com",
            projectId: "eventregistration-88419",
            storageBucket: "eventregistration-88419.appspot.com",
            messagingSenderId: "221716113520",
            appId: "1:221716113520:web:a46f507757ba0b99646cb5",
            measurementId: "G-L358B9LBQ4"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Handle dynamic participant name inputs
        document.getElementById("participants").addEventListener("input", function () {
            let count = parseInt(this.value) || 0;
            let container = document.getElementById("participantNames");
            container.innerHTML = "";

            for (let i = 1; i <= count; i++) {
                let div = document.createElement("div");
                div.classList.add("mb-3", "text-start");
                div.innerHTML = `
                    <label class="form-label fw-bold">Participant ${i} Name *</label>
                    <input type="text" class="form-control participant-name" required>
                `;
                container.appendChild(div);
            }
        });

        // Form submission event
        document.getElementById("registrationForm").addEventListener("submit", async function(event) {
            event.preventDefault();

            let participantInputs = document.querySelectorAll(".participant-name");
            let participantNames = Array.from(participantInputs).map(input => input.value);

            let newEntry = {
    name: document.getElementById("name").value,
    numParticipants: document.getElementById("participants").value,
    participantNames: participantNames,
    college: document.getElementById("college").value,
    contact: document.getElementById("contact").value,
    email: document.getElementById("email").value,
    dob: document.getElementById("dob").value,
    course: document.getElementById("course").value, // NEW FIELD
    programs: Array.from(document.querySelectorAll('input[name="program"]:checked')).map(e => e.value),
};


            try {
                await addDoc(collection(db, "registrations"), newEntry);
                alert("Registration Successful!");
                document.getElementById("registrationForm").reset();
                document.getElementById("participantNames").innerHTML = "";
            } catch (error) {
                console.error("Error saving registration: ", error);
            }
        });
    </script>
</body>
</html>
